# 中文与日文输入带来的用户体验/业务实现问题
## 场景再现
在测试我写的输入表单的时候，突然发现了一个问题，在一个输入框为 focus 状态的时候，如果用户误触了回车，会触发表单的提交事件，导致整个表单输入在用户不知情的情况下意外结束。这个情况在中、日文输入的情况下非常可能发生。主要有以下的原因：
- 中、日文的输入法有可能以回车键选择、结束输入
- 一些用户的行为习惯会多次按下回车键
因此，规避这种意外提交事件是必要的。如果输入意外结束，可能会产生错误的数据和有误的结果。
## 解决方案
要避免这种意外提交，实际上是很方便的。在表单元素或者表单元素的祖先元素上注册一个```onkeypress```监听事件：
```html
<section onkeypress={preventSubmit}>
	<lightning-record-edit-form>
		<!-- fields -->
	</lightning-record-edit-form>
</section>
```
在JS文件中，实现```preventSubmit```函数：
```js
preventSubmit(event) {
    if (event.keyCode === 13) {
        event.preventDefault()
        return false
    }
}
```
这下，在输入框内的回车事件冒泡被捕捉之后，我们的```preventSubmit```函数将会阻止表单提交。
## 深入讨论
实际上，隐式提交是互联网长久以来的约定俗成的规定，并且，回车触发隐式提交的功能实际上是不推荐被阻止、取消的。原因包括但不限于：
- 有一些网站的设计中，提交按钮被 主观/错误 地隐藏了，除了隐式提交没有别的方法
- 回车提交的方式是简便、快速的一种提交方式，它可以省去寻找提交按钮的过程
- 许多用户已经默认回车是一种可行的提交方式
关于回车提交表单的讨论，[这一篇文章](https://www.tjvantoll.com/2013/01/01/enter-should-submit-forms-stop-messing-with-that/)说得非常全面。
但是，在中日文环境下很有可能导致错误提交的情况下，这种功能就有待商榷了。对于我来说，首先用户的要求是第一位的，其次是互联网的约定俗成。如果在个人项目中，我十分推荐你沿用网页开发的隐式提交约定，不要阻止它的提交；如果是企业网页应用中，为了数据的正确、用户的良好体验，根据用户的习惯、要求来判断要不要禁用这个隐式提交事件。